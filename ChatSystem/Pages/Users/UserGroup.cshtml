@page
@model ChatSystem.Pages.Users.UserGroupModel
@{
    ViewData["Title"] = "User Group Chat";
}

<style>
    .group-container {
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-bottom: 10px;
        padding: 10px;
    }

    .group-name {
        cursor: pointer;
        font-size: 18px;
        color: #333;
        margin: 0;
        padding: 5px 10px;
        background-color: #f5f5f5;
        border-bottom: 1px solid #ddd;
        border-radius: 5px 5px 0 0;
    }

        .group-name span {
            font-size: 12px;
            vertical-align: middle;
        }

    .user-list {
        list-style-type: none;
        padding: 0;
        margin: 0;
        display: none;
    }

        .user-list li {
            padding: 5px 10px;
        }
</style>

<h1>@Model.UserObj.KnownAs Groups</h1>

@foreach (var group in ViewData["GroupData"] as List<(string, List<string>)>)
{
    <div class="group-container">
        <h2 id="groupName_@group.Item1" class="group-name" onclick="toggleUserList('@group.Item1')">
            @group.Item1 <span>&#9662;</span>
        </h2>
        <ul id="userList_@group.Item1" class="user-list">
            @foreach (var user in group.Item2)
            {
                <li>@user</li>
            }
        </ul>
    </div>
}

<script>
    var toggleUserList = function (groupName) {
        var userList = document.getElementById("userList_" + groupName);
        var groupElement = document.getElementById("groupName_" + groupName);

        if (userList.style.display === "none") {
            userList.style.display = "block";
            groupElement.innerHTML = groupName + " <span>&#9652;</span>";
        } else {
            userList.style.display = "none";
            groupElement.innerHTML = groupName + " <span>&#9662;</span>";
        }
    };
</script>
